## 版本

| 项目           | 版本          |
| -------------- | ------------- |
| spring-boot    | 2.0.4.RELEASE |
| mongodb-driver | 3.6.4         |
|                |               |



## 备注

本案例暂时采用mongodb作为数据源



## 停车场

需求

> 现地下车库有停车位若干，按照大小分为货车车位(数量为L个)和普通车位，普通车位又分为合约车位(M个)和临时车位(N个)。不同车位收费方式如下：货车按每小时10元计价，每天最高累计120元；普通临时车位按每小时5元计价，每天最高累计60元，普通合约车位每月收费150元。规定车辆进入车库时完成扫描计时，离开车库时完成结账并且释放车位。
> 请为该停车场设计一个车位实时余量统计和当日累计收入的简易程序。

实现

> **一、按java集合设计数据存储**
> 1、停车场基本信息 parkBasInfoList(序号、停车场名称、车位总数量、车位剩余数量)
> 2、车位数量信息 parkSpaceAmount(序号、车位类型、总数量、剩余数量)
> 3、车位类型信息 parkSpaceTypeInfo(序号、车位类型、价格)
> 4、停车记录 parkDetailInfo（序号、车位类型、驶入时间、驶出时间、停车总费用 )
> 注：停车场过车量大时，或多个停车场时，停车记录可分成两个表存储（停车驶入记录表和停车使出记录表）
>
> **二、插入或更新数据存储**
> 1、车辆驶入到停车场后，插入【停车记录】的数据
> 并更新【停车场信息】和【车位数量信息】的车位剩余量。
> 2、车辆离开后，根据停车位类型和停车时长计算出停车费用
> 并更新【停车记录】的驶出时间和停车总费用，并更新【停车场基本信息】和【车位数量信息】的车位剩余量。
> 注：停车费用是根据停车类型，从车位类型信息里获取到价格，然后根据价格和时长计算出费用。
> 以上的1、2步骤里，每个步骤的插入或更新要分别在同一个事务中。
>
> **三、查询或统计**
> 1、从【车位数量信息】可统计出不同车位的实时余量，也可从【停车场基本信息】统计出停车场的总剩余数量。
> 2、从【停车记录信息】可按日期统计总收入



预约合约车位

>当前没有可用车位出租
>
>挂牌临时出租预约申请信息：需要出租的时长、出租开始时间、出租结束时间

合约车位临时出租

> 车为主挂牌车位出租信息：车位可出租时长(出租开始时间、出租结束时间)、出租价格（200元）、佣金价格(物业管理服务费等，抽成10%， 20元)
>
> 临时出租申请（车位号、车牌、借用时长）、车位主同意，则承租人驾车可以驶入该车位临时停车，不需要缴纳临时停车费，只需要缴纳车位出租费(200元)
>
> 车为主出租车位需要和物业签订合同，要不然物业不放临时车进入合约车位

